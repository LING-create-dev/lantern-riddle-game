<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ–°æ˜¥çŒœç¯è°œå¤§èµ›</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #ff6b6b 0%, #ffa500 50%, #ff1744 100%);
            min-height: 100vh;
            margin: 0;
            padding: 10px;
            color: #333;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }
        
        .container {
            max-width: 400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            overflow: hidden;
            animation: slideIn 0.5s ease-out;
            min-height: calc(100vh - 20px);
            display: flex;
            flex-direction: column;
        }
        
        @keyframes slideIn {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .header {
            background: linear-gradient(135deg, #ff1744 0%, #ff6b6b 100%);
            color: white;
            padding: 20px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .header::before {
            content: 'ğŸ®';
            position: absolute;
            font-size: 60px;
            opacity: 0.2;
            top: -10px;
            left: -10px;
            animation: float 3s ease-in-out infinite;
        }
        
        .header::after {
            content: 'ğŸ®';
            position: absolute;
            font-size: 40px;
            opacity: 0.3;
            bottom: -5px;
            right: -5px;
            animation: float 2s ease-in-out infinite reverse;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-10px) rotate(5deg); }
        }
        
        .header h1 {
            font-size: 24px;
            margin-bottom: 5px;
            position: relative;
            z-index: 1;
        }
        
        .header p {
            font-size: 14px;
            opacity: 0.9;
            position: relative;
            z-index: 1;
        }
        
        .game-area {
            padding: 20px;
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        .progress-bar {
            background: #f0f0f0;
            border-radius: 10px;
            height: 12px;
            margin-bottom: 20px;
            overflow: hidden;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff6b6b, #ff1744);
            border-radius: 10px;
            transition: width 0.5s ease;
            box-shadow: 0 2px 4px rgba(255, 107, 107, 0.3);
        }
        
        .question-card {
            background: linear-gradient(135deg, #fff5f5 0%, #ffffff 100%);
            border: 2px solid #ff6b6b;
            border-radius: 15px;
            padding: 25px 20px;
            margin-bottom: 25px;
            text-align: center;
            box-shadow: 0 8px 20px rgba(255, 107, 107, 0.2);
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            min-height: 200px;
        }
        
        .question-number {
            color: #ff1744;
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
        }
        
        .riddle-text {
            font-size: 20px;
            line-height: 1.6;
            margin-bottom: 20px;
            color: #333;
            font-weight: 500;
        }
        
        .riddle-hint {
            font-size: 16px;
            color: #666;
            font-style: italic;
        }
        
        .options {
            display: grid;
            gap: 15px;
            margin-bottom: 25px;
        }
        
        .option {
            background: white;
            border: 3px solid #e0e0e0;
            border-radius: 15px;
            padding: 18px 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 18px;
            font-weight: 500;
            text-align: center;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }
        
        .option:hover, .option:active {
            border-color: #ff6b6b;
            background: #fff5f5;
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(255, 107, 107, 0.3);
        }
        
        .option.selected {
            border-color: #ff1744;
            background: #ff1744;
            color: white;
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(255, 23, 68, 0.4);
        }
        
        .option.correct {
            border-color: #4caf50;
            background: #4caf50;
            color: white;
            animation: correctPulse 0.6s ease;
        }
        
        .option.wrong {
            border-color: #f44336;
            background: #f44336;
            color: white;
            animation: wrongShake 0.6s ease;
        }
        
        @keyframes correctPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        @keyframes wrongShake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        
        .btn {
            width: 100%;
            padding: 18px;
            border: none;
            border-radius: 15px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 15px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #ff6b6b 0%, #ff1744 100%);
            color: white;
        }
        
        .btn-primary:hover, .btn-primary:active {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(255, 107, 107, 0.4);
        }
        
        .btn-primary:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .score-display {
            text-align: center;
            margin-bottom: 20px;
        }
        
        .score-number {
            font-size: 48px;
            font-weight: bold;
            color: #ff1744;
            margin-bottom: 10px;
        }
        
        .score-text {
            font-size: 18px;
            color: #666;
        }
        
        .result-card {
            background: linear-gradient(135deg, #fff5f5 0%, #f0f8ff 100%);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            margin-bottom: 20px;
        }
        
        .result-title {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 15px;
        }
        
        .result-excellent {
            color: #4caf50;
        }
        
        .result-poor {
            color: #f44336;
        }
        
        .hidden {
            display: none;
        }
        
        .celebration {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1000;
        }
        
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background: #ff6b6b;
            animation: confetti-fall 3s linear infinite;
        }
        
        @keyframes confetti-fall {
            0% {
                transform: translateY(-100vh) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }
        
        /* ç§»åŠ¨ç«¯ä¼˜åŒ– */
        @media (max-width: 768px) {
            body {
                padding: 5px;
                font-size: 16px;
            }
            
            .container {
                max-width: 100%;
                margin: 0;
                border-radius: 15px;
                min-height: calc(100vh - 10px);
            }
            
            .header {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 20px;
                margin-bottom: 8px;
            }
            
            .header p {
                font-size: 12px;
            }
            
            .game-area {
                padding: 15px;
            }
            
            .question-card {
                padding: 20px 15px;
                margin-bottom: 20px;
                min-height: 180px;
            }
            
            .riddle-text {
                font-size: 18px;
                line-height: 1.5;
                margin-bottom: 15px;
            }
            
            .option {
                padding: 15px 12px;
                font-size: 16px;
                min-height: 55px;
                border-radius: 12px;
            }
            
            .btn {
                padding: 15px;
                font-size: 16px;
                border-radius: 12px;
                margin-bottom: 12px;
            }
        }
        
        /* è§¦æ‘¸ä¼˜åŒ– */
        @media (hover: none) and (pointer: coarse) {
            .option:hover {
                transform: none;
                box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            }
            
            .btn:hover {
                transform: none;
            }
            
            .option:active {
                transform: scale(0.98);
                transition: transform 0.1s ease;
            }
            
            .btn:active {
                transform: scale(0.98);
                transition: transform 0.1s ease;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ® æ–°æ˜¥çŒœç¯è°œå¤§èµ› ğŸ®</h1>
            <p>ä¼ ç»Ÿæ–‡åŒ–ï¼Œæ™ºæ…§æŒ‘æˆ˜</p>
            <div style="font-size: 12px; opacity: 0.8; margin-top: 5px;">
                é¢˜åº“å…±30é¢˜ Â· æ¯æ¬¡éšæœº3é¢˜ Â· å…¨å¯¹æœ‰å¥–
            </div>
        </div>
        
        <!-- æ¸¸æˆç•Œé¢ -->
        <div id="gameScreen" class="game-area">
            <div class="progress-bar">
                <div class="progress-fill" id="progressBar"></div>
            </div>
            
            <div class="question-card">
                <div class="question-number" id="questionNumber">ç¬¬ 1 é¢˜</div>
                <div class="riddle-text" id="riddleText">æ­£åœ¨åŠ è½½é¢˜ç›®...</div>
                <div class="riddle-hint" id="riddleHint"></div>
            </div>
            
            <div class="options" id="optionsContainer">
                <!-- é€‰é¡¹å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </div>
            
            <button class="btn btn-primary" id="nextBtn" onclick="nextQuestion()" disabled>
                ä¸‹ä¸€é¢˜
            </button>
        </div>
        
        <!-- ç»“æœç•Œé¢ -->
        <div id="resultScreen" class="game-area hidden">
            <div class="result-card">
                <div class="result-title" id="resultTitle">æ¸¸æˆç»“æŸ</div>
                <div class="score-display">
                    <div class="score-number" id="finalScore">0</div>
                    <div class="score-text">åˆ† / 30åˆ†</div>
                </div>
                <div id="resultMessage"></div>
            </div>
            
            <!-- å…¨å¯¹æ‰æ˜¾ç¤ºçš„è·å¥–ç™»è®°é“¾æ¥ -->
            <div id="winnerLinkSection" class="hidden">
                <div style="background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%); padding: 20px; border-radius: 15px; margin-bottom: 20px; text-align: center;">
                    <h3 style="color: #155724; margin-bottom: 15px;">ğŸ‰ æ­å–œæ‚¨å…¨éƒ¨ç­”å¯¹ï¼</h3>
                    <p style="color: #155724; margin-bottom: 15px;">æ‚¨å¯ä»¥ç‚¹å‡»ä¸‹æ–¹é“¾æ¥å¡«å†™è·å¥–è®°å½•ï¼š</p>
                    <a href="https://xipdawmc.jsjform.com/f/Xo5Lw3" target="_blank" 
                       style="display: inline-block; background: #28a745; color: white; padding: 15px 25px; 
                              border-radius: 10px; text-decoration: none; font-weight: bold; 
                              box-shadow: 0 4px 8px rgba(40, 167, 69, 0.3); 
                              transition: all 0.3s ease;">
                        ğŸ“ å¡«å†™è·å¥–è®°å½•ç™»è®°è¡¨
                    </a>
                    <p style="color: #155724; font-size: 12px; margin-top: 10px; opacity: 0.8;">
                        ç‚¹å‡»é“¾æ¥å°†åœ¨æ–°çª—å£ä¸­æ‰“å¼€è¡¨å•
                    </p>
                </div>
            </div>
            
            <button class="btn btn-primary" onclick="restartGame()">å†ç©ä¸€æ¬¡</button>
        </div>
    </div>
    
    <!-- åº†ç¥åŠ¨ç”»å®¹å™¨ -->
    <div id="celebration" class="celebration hidden"></div>
    
    <script>
        // å®Œæ•´ç¯è°œé¢˜åº“
        const riddleBank = [
            {
                question: "åƒé‡Œç›¸é€¢åœ¨èŠ±å‰",
                hint: "æ‰“ä¸€å­—",
                options: ["è‘£", "é‡", "ç§", "ç«¥"],
                answer: 1,
                explanation: "åƒé‡Œç›¸é€¢=é‡ï¼Œåœ¨èŠ±å‰=è‰¹ï¼Œåˆèµ·æ¥æ˜¯'é‡'"
            },
            {
                question: "ä¸€æœˆä¸€æ—¥éä»Šå¤©",
                hint: "æ‰“ä¸€å­—",
                options: ["æ˜", "æ—¦", "æ˜¥", "æœ"],
                answer: 0,
                explanation: "ä¸€æœˆä¸€æ—¥=æ˜ï¼Œéä»Šå¤©è¡¨ç¤ºä¸æ˜¯'ä»Š'å­—"
            },
            {
                question: "åŠéƒ¨æ˜¥ç§‹",
                hint: "æ‰“ä¸€å­—",
                options: ["ç§¦", "æ˜¥", "å­£", "é¦™"],
                answer: 0,
                explanation: "æ˜¥ç§‹çš„ä¸€åŠï¼Œæ˜¥å­—çš„ä¸€åŠæ˜¯'ç§¦'"
            },
            {
                question: "åäº”çš„æœˆäº®",
                hint: "æ‰“ä¸€æˆè¯­",
                options: ["æ­£å¤§å…‰æ˜", "åœ†åœ†æ»¡æ»¡", "åå…¨åç¾", "å…‰æ˜æ­£å¤§"],
                answer: 0,
                explanation: "åäº”çš„æœˆäº®æœ€åœ†æœ€äº®ï¼Œå¯“æ„æ­£å¤§å…‰æ˜"
            },
            {
                question: "æ— å¤´æ— å°¾ä¸€äº©ç”°",
                hint: "æ‰“ä¸€å­—",
                options: ["é±¼", "ç”°", "ç”±", "ç”³"],
                answer: 0,
                explanation: "é±¼å­—å»æ‰å¤´å°¾ï¼Œä¸­é—´åƒä¸€äº©ç”°"
            },
            {
                question: "ä¸€äººä¸€å¼ å£ï¼Œå£ä¸‹é•¿åªæ‰‹",
                hint: "æ‰“ä¸€å­—",
                options: ["æ‹¿", "å–", "æŒ", "æ‹"],
                answer: 0,
                explanation: "äºº+å£+æ‰‹=æ‹¿"
            },
            {
                question: "å±±ä¸Šè¿˜æœ‰å±±",
                hint: "æ‰“ä¸€å­—",
                options: ["å‡º", "å²³", "å³°", "å´"],
                answer: 0,
                explanation: "å±±ä¸Šè¿˜æœ‰å±±ï¼Œä¸¤ä¸ªå±±å­—å èµ·æ¥æ˜¯'å‡º'"
            },
            {
                question: "åå¼ å£ï¼Œä¸€é¢—å¿ƒ",
                hint: "æ‰“ä¸€å­—",
                options: ["æ€", "æƒ³", "å¿†", "å¿µ"],
                answer: 0,
                explanation: "åä¸ªå£åŠ ä¸€ä¸ªå¿ƒï¼Œç»„æˆ'æ€'å­—"
            },
            {
                question: "è¯´å®ƒå°ï¼Œä¸‹è¾¹å¤§ï¼Œè¯´å®ƒå¤§ï¼Œä¸Šè¾¹å°",
                hint: "æ‰“ä¸€å­—",
                options: ["å°–", "å°", "å¤§", "ä¸Š"],
                answer: 0,
                explanation: "å°–å­—ä¸Šå°ä¸‹å¤§"
            },
            {
                question: "ä¸€åªé»‘ç‹—ï¼Œä¸å«ä¸å¼",
                hint: "æ‰“ä¸€å­—",
                options: ["é»˜", "é™", "å¢¨", "é»‘"],
                answer: 2,
                explanation: "é»‘è‰²çš„ç‹—ï¼Œä¸å«ä¸å¼ï¼ŒæŒ‡å¢¨æ°´"
            }
            ,
            {
                question: "æœ‰å¿ƒèµ°ä¸å¿«ï¼Œè§æ°´è£…ä¸å®Œ",
                hint: "æ‰“ä¸€å­—",
                options: ["æ…¢", "æ»¡", "æ¼«", "è›®"],
                answer: 1,
                explanation: "æœ‰å¿ƒæ˜¯'æ…¢'ï¼Œè§æ°´æ˜¯'æ»¡'"
            },
            {
                question: "ä¸€å£å’¬ä½å¤šåŠæˆª",
                hint: "æ‰“ä¸€å­—",
                options: ["å", "å„", "å¤š", "å¤•"],
                answer: 0,
                explanation: "ä¸€å£å’¬ä½'å¤š'å­—çš„å¤šåŠæˆªï¼Œå‰©ä¸‹'å'"
            },
            {
                question: "æ°´ä¸Šå·¥ç¨‹",
                hint: "æ‰“ä¸€å­—",
                options: ["æ±", "æ±Ÿ", "æ±ª", "æ±—"],
                answer: 0,
                explanation: "æ°´+å·¥=æ±"
            },
            {
                question: "æ‹±æ‰‹è®©äºº",
                hint: "æ‰“ä¸€å­—",
                options: ["ä¾›", "å…±", "æ‹±", "æ­"],
                answer: 0,
                explanation: "æ‹±æ‰‹è®©äººï¼Œæ‹±+äºº=ä¾›"
            },
            {
                question: "èµ°æ˜¯é”™çš„",
                hint: "æ‰“ä¸€å­—",
                options: ["èµµ", "èµ·", "è¶Š", "è¶‹"],
                answer: 0,
                explanation: "èµ°+é”™çš„ä¸€éƒ¨åˆ†=èµµ"
            },
            {
                question: "ç™½å¤´ç¿",
                hint: "æ‰“ä¸€å­—",
                options: ["ç¿", "è€", "ä¼¯", "å…¬"],
                answer: 0,
                explanation: "ç™½å¤´ç¿å°±æ˜¯'ç¿'å­—"
            },
            {
                question: "å››é¢éƒ½æ˜¯å±±ï¼Œå±±å±±éƒ½ç›¸è¿",
                hint: "æ‰“ä¸€å­—",
                options: ["ç”°", "å›", "å›š", "å›°"],
                answer: 0,
                explanation: "å››é¢éƒ½æ˜¯å±±ï¼Œå½¢æˆç”°å­—å½¢çŠ¶"
            },
            {
                question: "ä¸€ç‚¹ä¸€æ¨ªé•¿ï¼Œä¸€æ’‡åˆ°å—æ´‹ï¼Œå—æ´‹æœ‰ä¸ªäººï¼Œåªæœ‰ä¸€å¯¸é•¿",
                hint: "æ‰“ä¸€å­—",
                options: ["åºœ", "ä»˜", "ç¬¦", "é™„"],
                answer: 0,
                explanation: "æŒ‰ç¬”ç”»é¡ºåºç»„æˆ'åºœ'å­—"
            },
            {
                question: "ä¸Šä¸åœ¨ä¸Šï¼Œä¸‹ä¸åœ¨ä¸‹ï¼Œä¸å¯åœ¨ä¸Šï¼Œä¸”å®œåœ¨ä¸‹",
                hint: "æ‰“ä¸€å­—",
                options: ["ä¸€", "äºŒ", "ä¸‰", "ä¸‹"],
                answer: 0,
                explanation: "æè¿°çš„æ˜¯'ä¸€'å­—çš„ä½ç½®ç‰¹ç‚¹"
            },
            {
                question: "ä¹åä¹",
                hint: "æ‰“ä¸€å­—",
                options: ["ç™½", "ç™¾", "ä¹", "å"],
                answer: 0,
                explanation: "ä¹åä¹ï¼Œå·®ä¸€å°±æ˜¯ä¸€ç™¾ï¼Œæ‰€ä»¥æ˜¯'ç™½'"
            },
            {
                question: "ä¸€åŠ ä¸€ä¸æ˜¯äºŒ",
                hint: "æ‰“ä¸€å­—",
                options: ["ç‹", "åœŸ", "å", "å·¥"],
                answer: 0,
                explanation: "ä¸€åŠ ä¸€åœ¨å­—å½¢ä¸Šç»„æˆ'ç‹'å­—"
            },
            {
                question: "äººä¸åœ¨å…¶ä½",
                hint: "æ‰“ä¸€å­—",
                options: ["ç«‹", "ä½", "äºº", "ä½"],
                answer: 0,
                explanation: "äººä¸åœ¨å…¶ä½ï¼Œå°±æ˜¯'ç«‹'å­—"
            },
            {
                question: "å…«åå…«",
                hint: "æ‰“ä¸€å­—",
                options: ["ç±³", "æ¥", "æœ¨", "æ—"],
                answer: 0,
                explanation: "å…«åå…«ï¼Œå½¢çŠ¶åƒ'ç±³'å­—"
            },
            {
                question: "åˆ€å‡ºé˜",
                hint: "æ‰“ä¸€å­—",
                options: ["åŠ›", "åˆ€", "åˆ‡", "åˆ©"],
                answer: 0,
                explanation: "åˆ€å‡ºé˜ï¼Œåªå‰©ä¸‹'åŠ›'"
            },
            {
                question: "åä¸€ä¸ªè¯»ä¹¦äºº",
                hint: "æ‰“ä¸€å­—",
                options: ["ä»•", "å£«", "å­¦", "æ–‡"],
                answer: 0,
                explanation: "åä¸€ä¸ªè¯»ä¹¦äººï¼Œåä¸€+å£«=ä»•"
            },
            {
                question: "å››ä¸ªäººæ¬ä¸ªæœ¨å¤´",
                hint: "æ‰“ä¸€å­—",
                options: ["æ°", "æ£®", "æ—", "æœ¨"],
                answer: 0,
                explanation: "å››ä¸ªäººæ¬æœ¨å¤´ï¼Œäºº+æœ¨=æ°"
            },
            {
                question: "ä¸€äººåœ¨å†…",
                hint: "æ‰“ä¸€å­—",
                options: ["è‚‰", "å†…", "äºº", "å…¥"],
                answer: 0,
                explanation: "ä¸€äººåœ¨å†…ï¼Œäººåœ¨å†…éƒ¨ï¼Œç»„æˆ'è‚‰'å­—"
            },
            {
                question: "ä¸€å¤§äºŒå°",
                hint: "æ‰“ä¸€å­—",
                options: ["å¥ˆ", "å¤§", "å°", "å°–"],
                answer: 0,
                explanation: "ä¸€å¤§äºŒå°ï¼Œç»„æˆ'å¥ˆ'å­—"
            },
            {
                question: "åœŸä¸Šæœ‰ç«¹æ—ï¼ŒåœŸä¸‹ä¸€å¯¸é‡‘",
                hint: "æ‰“ä¸€å­—",
                options: ["ç­‰", "ç«¹", "é‡‘", "å¯º"],
                answer: 0,
                explanation: "åœŸä¸Šç«¹æ—ï¼ŒåœŸä¸‹å¯¸é‡‘ï¼Œç»„æˆ'ç­‰'å­—"
            },
            {
                question: "å¤§ä¸ˆå¤«ä¸å¾—å‡ºå¤´",
                hint: "æ‰“ä¸€å­—",
                options: ["å¤©", "å¤«", "äºº", "å¤§"],
                answer: 0,
                explanation: "å¤§ä¸ˆå¤«ä¸å¾—å‡ºå¤´ï¼Œå»æ‰'å¤§'å­—ä¸Šé¢ä¸€æ¨ªï¼Œå˜æˆ'å¤©'"
            }
        ];
        
        // æ¸¸æˆçŠ¶æ€
        let riddles = [];
        let currentQuestion = 0;
        let score = 0;
        let correctAnswers = 0;
        let selectedAnswer = -1;
        
        // éšæœºé€‰æ‹©é¢˜ç›®
        function selectRandomRiddles() {
            const availableRiddles = [...riddleBank];
            riddles = [];
            
            for (let i = 0; i < 3; i++) {
                const randomIndex = Math.floor(Math.random() * availableRiddles.length);
                riddles.push(availableRiddles[randomIndex]);
                availableRiddles.splice(randomIndex, 1);
            }
            
            console.log('æœ¬æ¬¡æ¸¸æˆé¢˜ç›®ï¼š', riddles.map(r => r.question));
        }
        
        // åˆå§‹åŒ–æ¸¸æˆ
        function initGame() {
            console.log('å¼€å§‹åˆå§‹åŒ–æ¸¸æˆ...');
            
            try {
                currentQuestion = 0;
                score = 0;
                correctAnswers = 0;
                selectedAnswer = -1;
                
                selectRandomRiddles();
                
                document.getElementById('gameScreen').classList.remove('hidden');
                document.getElementById('resultScreen').classList.add('hidden');
                
                showQuestion();
                updateProgress();
                
                console.log('æ¸¸æˆåˆå§‹åŒ–å®Œæˆ');
            } catch (error) {
                console.error('æ¸¸æˆåˆå§‹åŒ–å¤±è´¥:', error);
                document.getElementById('riddleText').textContent = 'æ¸¸æˆåˆå§‹åŒ–å¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•';
                document.getElementById('riddleHint').textContent = 'é”™è¯¯è¯¦æƒ…: ' + error.message;
            }
        }
        
        // æ˜¾ç¤ºé¢˜ç›®
        function showQuestion() {
            if (currentQuestion >= riddles.length) {
                showResult();
                return;
            }
            
            const riddle = riddles[currentQuestion];
            document.getElementById('questionNumber').textContent = `ç¬¬ ${currentQuestion + 1} é¢˜`;
            document.getElementById('riddleText').textContent = riddle.question;
            document.getElementById('riddleHint').textContent = riddle.hint;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            
            riddle.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.textContent = option;
                optionElement.onclick = () => selectOption(index);
                optionsContainer.appendChild(optionElement);
            });
            
            document.getElementById('nextBtn').disabled = true;
            selectedAnswer = -1;
        }
        
        // é€‰æ‹©ç­”æ¡ˆ
        function selectOption(index) {
            selectedAnswer = index;
            
            const options = document.querySelectorAll('.option');
            options.forEach((option, i) => {
                option.classList.remove('selected', 'correct', 'wrong');
                if (i === index) {
                    option.classList.add('selected');
                }
            });
            
            document.getElementById('nextBtn').disabled = false;
        }
        
        // ä¸‹ä¸€é¢˜
        function nextQuestion() {
            if (selectedAnswer === -1) return;
            
            const riddle = riddles[currentQuestion];
            const options = document.querySelectorAll('.option');
            
            options.forEach((option, i) => {
                if (i === riddle.answer) {
                    option.classList.add('correct');
                } else if (i === selectedAnswer && i !== riddle.answer) {
                    option.classList.add('wrong');
                }
            });
            
            if (selectedAnswer === riddle.answer) {
                score += 10;
                correctAnswers++;
                showCelebration();
            }
            
            setTimeout(() => {
                currentQuestion++;
                updateProgress();
                showQuestion();
            }, 1500);
        }
        
        // æ›´æ–°è¿›åº¦æ¡
        function updateProgress() {
            const progress = (currentQuestion / riddles.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
        }
        
        // æ˜¾ç¤ºç»“æœ
        function showResult() {
            document.getElementById('gameScreen').classList.add('hidden');
            document.getElementById('resultScreen').classList.remove('hidden');
            
            document.getElementById('finalScore').textContent = score;
            
            if (correctAnswers === 3) {
                // åªæœ‰å…¨éƒ¨ç­”å¯¹æ‰æ˜¾ç¤ºè·å¥–é“¾æ¥
                document.getElementById('winnerLinkSection').classList.remove('hidden');
                document.getElementById('resultTitle').textContent = 'ğŸ‰ æ­å–œå…¨å¯¹ï¼';
                document.getElementById('resultMessage').textContent = 'æ‚¨ç­”å¯¹äº†æ‰€æœ‰é¢˜ç›®ï¼Œå¯ä»¥å¡«å†™è·å¥–è®°å½•ï¼';
                document.getElementById('resultTitle').className = 'result-title result-excellent';
                
                if (score === 30) {
                    showCelebration();
                }
            } else {
                // æœ‰é”™è¯¯å°±ä¸æ˜¾ç¤ºè·å¥–é“¾æ¥
                document.getElementById('winnerLinkSection').classList.add('hidden');
                document.getElementById('resultTitle').textContent = 'ğŸ˜” æœªèƒ½å…¨å¯¹';
                document.getElementById('resultMessage').textContent = `æ‚¨ç­”å¯¹äº† ${correctAnswers}/3 é¢˜ï¼Œéœ€è¦å…¨éƒ¨ç­”å¯¹æ‰èƒ½è·å¾—å¥–åŠ±ã€‚`;
                document.getElementById('resultTitle').className = 'result-title result-poor';
            }
        }
        
        // æ˜¾ç¤ºåº†ç¥åŠ¨ç”»
        function showCelebration() {
            const celebration = document.getElementById('celebration');
            celebration.classList.remove('hidden');
            celebration.innerHTML = '';
            
            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + '%';
                confetti.style.animationDelay = Math.random() * 3 + 's';
                confetti.style.backgroundColor = ['#ff6b6b', '#ffa500', '#ff1744', '#4caf50', '#2196f3'][Math.floor(Math.random() * 5)];
                celebration.appendChild(confetti);
            }
            
            setTimeout(() => {
                celebration.classList.add('hidden');
            }, 3000);
        }
        
        // é‡æ–°å¼€å§‹æ¸¸æˆ
        function restartGame() {
            document.getElementById('resultScreen').classList.add('hidden');
            document.getElementById('gameScreen').classList.remove('hidden');
            initGame();
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåç«‹å³åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            console.log('é¡µé¢åŠ è½½å®Œæˆï¼Œç«‹å³åˆå§‹åŒ–æ¸¸æˆ...');
            
            try {
                initGame();
                console.log('æ¸¸æˆåˆå§‹åŒ–æˆåŠŸ');
            } catch (error) {
                console.error('æ¸¸æˆåˆå§‹åŒ–å¤±è´¥:', error);
                document.getElementById('riddleText').textContent = 'æ¸¸æˆåˆå§‹åŒ–å¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•';
                document.getElementById('riddleHint').textContent = 'é”™è¯¯è¯¦æƒ…: ' + error.message;
            }
        });
        
        // å¤‡ç”¨åˆå§‹åŒ–
        window.addEventListener('load', function() {
            if (document.getElementById('riddleText').textContent === 'æ­£åœ¨åŠ è½½é¢˜ç›®...') {
                console.log('å¤‡ç”¨åˆå§‹åŒ–è§¦å‘');
                initGame();
            }
        });
        
        // æ·»åŠ é”®ç›˜æ”¯æŒ
        document.addEventListener('keydown', function(e) {
            if (e.key >= '1' && e.key <= '4') {
                const index = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option');
                if (options[index] && !document.getElementById('gameScreen').classList.contains('hidden')) {
                    selectOption(index);
                }
            } else if (e.key === 'Enter') {
                const nextBtn = document.getElementById('nextBtn');
                if (!nextBtn.disabled && !document.getElementById('gameScreen').classList.contains('hidden')) {
                    nextQuestion();
                }
            }
        });
    </script>
</body>
</html>
